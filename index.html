<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Sketch</title>
    <link rel="shortcut icon" href="icon.png">
    <link rel="stylesheet" href="styles/style.css">
    <script defer src="scripts/utils.js" charset="utf-8"></script>
    <script defer src="scripts/template.js" charset="utf-8"></script>
    <script defer src="scripts/fivedb.js" charset="utf-8"></script>
    <script defer src="scripts/classes.js" charset="utf-8"></script>
    <script defer src="scripts/script.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
</head>
<body onmousedown="startPan(event)" onmousemove="movePan(event)" onmouseup="stopPan()">
    <a id="dl" download style="display:none"></a>
    <div class="background panable scrollable"></div>
    <svg id="canvas" class="panable scrollable"></svg>
    <svg id="temp" class="panable scrollable"></svg>
    

    <div class="typeLogo">
        <i id="dashLogo" class="material-symbols-rounded">flip</i>
        <i id="straightLogo" class="material-symbols-rounded">linear_scale</i>
        <i id="fillLogo" class="material-symbols-rounded">tonality</i>
    </div>

    <span class="title">Sketch</span>


    <div class="toolbar toolbar_top">
        <img src="logo.png" height="32px">

        <div class="separator"></div>

        <div class="tool toolcls" id="md3" onclick="changeMode(3)" title="Ouvrir / sauvegarder">
            <i class="material-symbols-rounded">folder</i>
        </div>
        <div class="tool toolcls" id="md4" onclick="changeMode(4)" title="Exporter">
            <i class="material-symbols-rounded">file_upload</i>
        </div>
        <div class="tool toolcls" id="md5" onclick="changeMode(5)" title="Options">
            <i class="material-symbols-rounded">settings</i>
        </div>
        <div class="tool" id="helptool" onclick="showHelp()" title="Sauvegarde">
            <i class="material-symbols-rounded">help</i>
        </div>

        <div class="separator"></div>


        <div class="toolcls tool active" id="md1" onclick="changeMode(1)" title="Crayon"><i class="material-symbols-rounded">mode_edit</i></div>
        <div class="toolcls tool" id="md0" onclick="changeMode(0)" title="Gomme"><i class="material-symbols-rounded">gradient</i></div>
        <div class="toolcls tool" id="md2" onclick="changeMode(2)" title="Remplissage"><i class="material-symbols-rounded">format_color_fill</i></div>

        <div class="separator"></div>

        <div class="zoombar">
            <div class="pointer" onclick='zoomOut(event)'><i class="material-symbols-rounded">remove</i></div>
            <div class="zoomslider">
                <div id="zoomsliderinner"></div>
                <div id="zoomLabel">100%</div>
            </div>
            <div class="pointer" onclick='zoomIn()'><i class="material-symbols-rounded">add</i></div>
        </div>
    </div>

    <div class="toolbar toolbar_left">

        <div class="tool" id="size1" onclick="changeSize(1,2)" title="Diamètre">
            <i class="material-symbols-rounded" style="font-size: 12px">circle</i>
        </div>
        <div class="tool active" id="size2" onclick="changeSize(2,6)" title="Diamètre">
            <i class="material-symbols-rounded" style="font-size: 18px">circle</i>
        </div>
        <div class="tool" id="size3" onclick="changeSize(3,10)" title="Diamètre">
            <i class="material-symbols-rounded">circle</i>
        </div>

        <div class="separator"></div>

        <div class="tool" id="toolDash" onclick="changeTool('dash')" title="Pointillé">
            <i class="material-symbols-rounded">power_input</i>
        </div>
        <div class="tool" id="toolStra" onclick="changeTool('straight')" title="Ligne droite">
            <i class="material-symbols-rounded">straighten</i>
        </div>
        <div class="tool" id="toolFill" onclick="changeTool('fill')" title="Remplie">
            <i class="material-symbols-rounded">tonality</i>
        </div>

        <div class="separator"></div>

        <div class="tool active" onclick="changeColor(1,'')" id="color1">
            <div class="colorblock" style="background:black"></div>
        </div>
        <div class="tool" onclick="changeColor(2,'indianred')" id="color2">
            <div class="colorblock" style="background:indianred"></div>
        </div>
        <div class="tool" onclick="changeColor(3,'darkseagreen')" id="color3">
            <div class="colorblock" style="background:darkseagreen"></div>
        </div>
        <div class="tool" onclick="changeColor(4,'steelblue')" id="color4">
            <div class="colorblock" style="background:steelblue"></div>
        </div>
        <div class="tool" onclick="changeColor(5,'')" id="color5">
            <div id="colorpick" class="colorblock"  style="box-shadow: inset 0 0 2px 0px var(--primary-tone)"></div>
            <div class="colorpicker">
                <input type="color" name="" id="colorinput" oninput="pickColor(this)">
                <i class="material-symbols-rounded">colorize</i>
            </div>
        </div>

    </div>
    
    <div class="help" id="help">
        <div class="menu-title">Aide</div>

        <div class="helpline">
            <div><span class="helpkey">Maj</span></div>
            <div>Ligne</div>
        </div>
        <div class="helpline">
            <div><span class="helpkey">Ctrl</span></div>
            <div>Rectangle</div>
        </div>
        <div class="helpline">
            <div><span class="helpkey">Alt</span></div>
            <div>Ellipse</div>
        </div>
        <div class="helpline">
            <div><span class="helpkey">Ctrl</span> + <span class="helpkey">Z</span></div>
            <div>Undo</div>
        </div>
        <div class="helpline">
            <div><span class="helpkey">Ctrl</span> + <span class="helpkey">S</span></div>
            <div>Save local</div>
        </div>
        
    </div>

    <div id="sindic" class="save-indicator">
        <div class="saveanim">
            <i class="material-symbols-rounded saveanimback">save</i> 
            <i class="material-symbols-rounded saveanimfront">save</i> 
        </div>
    </div>

    

    

    <div id="saveBox" class="ioBox">
        <div class="ioBox-header">
            <div class="ioBox-title">Exporter</div>
            <div class="closebtn" onclick="openExport()"><i class="material-symbols-rounded">close</i></div>
        </div>
        <div class="ioBox-content">
            <div>
                <div class="filename_div">Nom du fichier</div>
                <input class="textbox" type="text" id="filename" name="" value="" placeholder="">

                <div class="radios">
                    <div class="filename_div">Type</div>
                    <select name="savetype" id="savetype" onchange="changeSaveType(this)">
                        <option value="skt">Sketch</option>
                        <option value="svg">SVG</option>
                        <option value="png">PNG</option>
                        <option value="jpg">JPG</option>
                    </select>
                    <div class="filename_div">Options</div>
                    <div id="skt_option" class="saveoption optvisible">
                        <input type="checkbox" name="cps" value="true" checked> Compression <small>(-<span id="cpsgain"></span>%)</small>

                    </div>
                    <div id="svg_option" class="saveoption">
                        <input type="checkbox" name="police" value="true" checked> Police incorporée
                    </div>
                    <div id="png_option" class="saveoption">
                        <input type="checkbox" name="background" value="true"> Fond transparent
                    </div>
                    <div id="jpg_option" class="saveoption">
                        Pas d'options
                    </div>
                </div>
                <br />
                <div class="btn" onclick="save();">Télécharger</div>
            </div>
            <div>
                <div class="filename_div">Preview</div>
                <img src="" id="preview" alt="">
            </div>
        </div>
    </div>

    <div id="loadBox" class="ioBox">
        <div class="ioBox-header">
            <div class="ioBox-title">Ouvrir / Sauvegarder</div>
            <div class="closebtn" onclick="openLoad()"><i class="material-symbols-rounded">close</i></div>
        </div>
        <div class="ioBox-content">
            <div class="filename_div">Sauvegarder dans le stockage local</div>
            <div class="saveButtons">
                <input class="textbox" type="text" id="savelocalfilename" value="" placeholder="Nom du fichier">    
                <div class="btn" onclick="saveLocal()">Sauvegarder</div>
            </div>
            
            <div class="separator horizon my-1"></div>

            <div class="filename_div">Charger depuis le stockage local</div>
            <div class="listFiles">
                <div class="file header">
                    <div>Nom</div>
                    <div>Taille</div>
                    <div>Date</div>
                </div>
                <div id="fileSpawn">

                </div>
            </div>

            <div class="separator horizon my-1"></div>

            <div class="filename_div">Charger depuis un fichier</div>
            <div class="remoteFileLoader">
                <div class="fileLoader">Ouvrir un fichier .skt</div>
                <input class="" type="file" id="files" name="files[]" value="" onchange="loadRemoteFile(event)">
            </div>


            <div class="loadButtons">
                <div class="btn" onclick="confirmAction('confirmAutosave')">Charger autosave</div>
                <div></div>
                <div class="btn sealable sealbtn btndelete" onclick="confirmAction('confirmDeleteLocal')"><i class="material-symbols-rounded">delete</i> </div>
                <div class="btn sealable sealbtn" onclick="confirmAction('confirmOverwrite')">Ecraser</div>
                <div class="btn sealable sealbtn" onclick="confirmAction('confirmLoadLocal')">Charger</div>

            </div>
        </div>
    </div>

    <div id="optionBox" class="ioBox">
        <div class="ioBox-header">
            <div class="ioBox-title">Options</div>
            <div class="closebtn" onclick="openOption()"><i class="material-symbols-rounded">close</i></div>
        </div>
        <div class="ioBox-content radios">
            <div class="filename_div">Police</div>
            <select name="savetype" id="savetype" onchange="changePolice(this)">
                <option value="Permanent marker">Permanent Marker (Défaut)</option>
                <option value="monospace">Monospace</option>
                <option value="cursive">Cursive</option>
                <option value="sans-serif">Sans serif</option>
                <option value="serif">Serif</option>
                <option value="fantasy">Fantasy</option>
                <option value="system-ui">Système</option>
            </select>

            <div class="filename_div">Mode nuit</div>

            <div class="saveoption optvisible">
                <input type="checkbox" id="night" value="false" onchange="switchNight()"><label for="night">Activer / Désactiver</label>
            </div>
        </div>
    </div>

    <div id="confirmBox">
        <div class="confirmBoxInner">
            <div class="confirm_text">Etes-vous sûr ?</div>
            <div class="confirmButton">
                <div class="btn cancel" onclick="cancelConfirm()">Annuler</div>
                <div class="btn exec" onclick="execConfirm()">Confirmer</div>
            </div>
        </div>
    </div>

    <style id="dynStyle">text{font-family: permanent marker;}</style>
</body>
</html>
